[{"C:\\Users\\James\\Development\\offlinetv\\src\\index.tsx":"1","C:\\Users\\James\\Development\\offlinetv\\src\\reportWebVitals.ts":"2","C:\\Users\\James\\Development\\offlinetv\\src\\App.tsx":"3","C:\\Users\\James\\Development\\offlinetv\\src\\services\\memberService.tsx":"4","C:\\Users\\James\\Development\\offlinetv\\src\\components\\memberList.tsx":"5","C:\\Users\\James\\Development\\offlinetv\\src\\utils.ts":"6","C:\\Users\\James\\Development\\offlinetv\\src\\services\\twitchService.tsx":"7","C:\\Users\\James\\Development\\offlinetv\\src\\components\\loading.tsx":"8","C:\\Users\\James\\Development\\offlinetv\\src\\components\\refresh.tsx":"9"},{"size":500,"mtime":499162500000,"results":"10","hashOfConfig":"11"},{"size":425,"mtime":499162500000,"results":"12","hashOfConfig":"11"},{"size":1506,"mtime":1610616331458,"results":"13","hashOfConfig":"11"},{"size":328,"mtime":1610241053964,"results":"14","hashOfConfig":"11"},{"size":4768,"mtime":1610589648170,"results":"15","hashOfConfig":"11"},{"size":518,"mtime":1610359918012,"results":"16","hashOfConfig":"11"},{"size":574,"mtime":1610256020784,"results":"17","hashOfConfig":"11"},{"size":459,"mtime":1610589611502,"results":"18","hashOfConfig":"11"},{"size":246,"mtime":1610611361305,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"1lmqwxs",{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"31","usedDeprecatedRules":"22"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},"C:\\Users\\James\\Development\\offlinetv\\src\\index.tsx",[],["42","43"],"C:\\Users\\James\\Development\\offlinetv\\src\\reportWebVitals.ts",[],"C:\\Users\\James\\Development\\offlinetv\\src\\App.tsx",["44"],"C:\\Users\\James\\Development\\offlinetv\\src\\services\\memberService.tsx",[],"C:\\Users\\James\\Development\\offlinetv\\src\\components\\memberList.tsx",["45","46","47","48","49","50"],"import * as React from 'react';\r\nimport { pause, mySort } from '../utils';\r\nimport { getMembers } from '../services/memberService';\r\nimport { getStreamer, getStream } from '../services/twitchService';\r\nimport { Stream } from '../types/Stream';\r\nimport Loading from './loading';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nexport interface MemberListProps {\r\n}\r\n \r\nexport interface MemberListState {\r\n  loading: boolean,\r\n  members: Array<any>\r\n}\r\n\r\nclass MemberList extends React.Component<MemberListProps, MemberListState> {\r\n  state = {\r\n    loading: true,\r\n    members: []\r\n  };\r\n  \r\n  _isMounted = false;\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  handleClick(url: string) {\r\n    window.open(url, \"_blank\");\r\n  }\r\n\r\n  // TODO: Refactor to be more abstract.\r\n  // getAPI = async () => {\r\n  //   for (let i=0; i<members.length; i++) {\r\n  //     if (members[i].stream.label.toLowerCase() === \"twitch\") {\r\n  //       const streamerData = await getStreamer(members[i].stream.id);\r\n  //       const streamData = await getStream(members[i].stream.id);\r\n\r\n  //       let stream: Stream = {};\r\n\r\n  //       if (streamerData !== null) {\r\n  //         stream.logo = streamerData.logo;\r\n  //       }\r\n\r\n  //       if (streamData !== null) {\r\n  //         stream.viewers = streamData.viewers;\r\n  //         stream.game = streamData.game;\r\n  //         stream.lastStream = streamData.created_at;\r\n  //         stream.title = streamData.channel.status;\r\n  //         stream.followers = streamData.channel.followers;\r\n\r\n  //         members[i].stream.live = true;\r\n  //       }\r\n\r\n  //       members[i].api = { ...members[i].api,  ...stream };\r\n  //     } else {\r\n  //       console.log(\"Skipping non-Twitch streamers...\");\r\n  //     }\r\n  //   }\r\n  // }\r\n\r\n  async componentDidMount() {\r\n    console.log(\"Component starting to mount...\");\r\n\r\n    try {\r\n      this._isMounted = true;\r\n\r\n      // await pause(1.5);\r\n\r\n      // Get all members\r\n      let members = await getMembers();\r\n      // Get live members\r\n      let liveMembers = members.filter((member) => member.stream.live === true);\r\n      // Sort live members\r\n      mySort(liveMembers, \"api\", \"viewers\");\r\n      // Remove non-live members\r\n      members = members.filter((member) => member.stream.live === false);\r\n      // Sort non-live members by followers\r\n      mySort(members, \"api\", \"followers\");\r\n      // Merge live and non-live members\r\n      members = [ ...liveMembers, ...members ];\r\n\r\n      if (this._isMounted) {\r\n        console.log(\"Component mounted.\");\r\n        // this.setState({ members });\r\n        this.setState({ members, loading: false });\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  populateList() {\r\n    const { members } = this.state;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {members.map((member: any, index) => {\r\n          const { stream, api } = member;\r\n          const { live } = stream;\r\n          const { title } = api;\r\n          \r\n          let channelClass = \"channel\";\r\n          if (live === true) {\r\n            channelClass += \" online\";\r\n          } else {\r\n            channelClass += \" offline\";\r\n          }\r\n\r\n          return (\r\n            <div \r\n              className={channelClass}\r\n              key={index}\r\n              onClick={() => this.handleClick(stream.url)}\r\n            >\r\n              <div className=\"avatar\">\r\n                {/* <div className=\"avatar-ring\"></div> */}\r\n                <img\r\n                  className={stream.label.toLowerCase()}\r\n                  src={api.logo || \"/avatars/\" + stream.avatar}\r\n                  alt={member.alias.charAt(0)}\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"details\">\r\n                <div className=\"ng\">\r\n                  <div className=\"name\">\r\n                    {member.alias}\r\n                  </div>\r\n                  <div className=\"game\">\r\n                    {live && api.game}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"stream-title-p\">\r\n                  <div className=\"stream-title\" title={title}>\r\n                    {live && title}\r\n                  </div>\r\n                </div>\r\n        \r\n                <div className=\"view-count\">\r\n                  {live && (api.viewers && api.viewers.toLocaleString())}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  render() { \r\n    const { loading } = this.state;\r\n\r\n    return (\r\n      <div className=\"content\">\r\n        <Loading loading={loading}>\r\n          {this.populateList()}\r\n        </Loading>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default MemberList;","C:\\Users\\James\\Development\\offlinetv\\src\\utils.ts",[],"C:\\Users\\James\\Development\\offlinetv\\src\\services\\twitchService.tsx",[],["51","52"],"C:\\Users\\James\\Development\\offlinetv\\src\\components\\loading.tsx",[],"C:\\Users\\James\\Development\\offlinetv\\src\\components\\refresh.tsx",[],["53","54"],{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","severity":1,"message":"60","line":4,"column":8,"nodeType":"61","messageId":"62","endLine":4,"endColumn":15},{"ruleId":"59","severity":1,"message":"63","line":2,"column":10,"nodeType":"61","messageId":"62","endLine":2,"endColumn":15},{"ruleId":"59","severity":1,"message":"64","line":4,"column":10,"nodeType":"61","messageId":"62","endLine":4,"endColumn":21},{"ruleId":"59","severity":1,"message":"65","line":4,"column":23,"nodeType":"61","messageId":"62","endLine":4,"endColumn":32},{"ruleId":"59","severity":1,"message":"66","line":5,"column":10,"nodeType":"61","messageId":"62","endLine":5,"endColumn":16},{"ruleId":"59","severity":1,"message":"67","line":7,"column":8,"nodeType":"61","messageId":"62","endLine":7,"endColumn":9},{"ruleId":"59","severity":1,"message":"68","line":8,"column":8,"nodeType":"61","messageId":"62","endLine":8,"endColumn":14},{"ruleId":"55","replacedBy":"69"},{"ruleId":"57","replacedBy":"70"},{"ruleId":"55","replacedBy":"71"},{"ruleId":"57","replacedBy":"72"},"no-native-reassign",["73"],"no-negated-in-lhs",["74"],"@typescript-eslint/no-unused-vars","'Refresh' is defined but never used.","Identifier","unusedVar","'pause' is defined but never used.","'getStreamer' is defined but never used.","'getStream' is defined but never used.","'Stream' is defined but never used.","'_' is defined but never used.","'moment' is defined but never used.",["73"],["74"],["73"],["74"],"no-global-assign","no-unsafe-negation"]