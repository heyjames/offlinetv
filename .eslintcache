[{"C:\\Users\\James\\Development\\offlinetv\\src\\index.tsx":"1","C:\\Users\\James\\Development\\offlinetv\\src\\reportWebVitals.ts":"2","C:\\Users\\James\\Development\\offlinetv\\src\\App.tsx":"3","C:\\Users\\James\\Development\\offlinetv\\src\\services\\memberService.tsx":"4","C:\\Users\\James\\Development\\offlinetv\\src\\components\\memberList.tsx":"5","C:\\Users\\James\\Development\\offlinetv\\src\\utils.ts":"6","C:\\Users\\James\\Development\\offlinetv\\src\\services\\twitchService.tsx":"7","C:\\Users\\James\\Development\\offlinetv\\src\\components\\loading.tsx":"8","C:\\Users\\James\\Development\\offlinetv\\src\\components\\refresh.tsx":"9","C:\\Users\\James\\Development\\offlinetv\\src\\components\\masthead.tsx":"10"},{"size":556,"mtime":1610779886982,"results":"11","hashOfConfig":"12"},{"size":425,"mtime":499162500000,"results":"13","hashOfConfig":"12"},{"size":2391,"mtime":1610787436349,"results":"14","hashOfConfig":"12"},{"size":96,"mtime":1610759720864,"results":"15","hashOfConfig":"12"},{"size":5894,"mtime":1610761152111,"results":"16","hashOfConfig":"12"},{"size":518,"mtime":1610359918012,"results":"17","hashOfConfig":"12"},{"size":568,"mtime":1610619396211,"results":"18","hashOfConfig":"12"},{"size":459,"mtime":1610589611502,"results":"19","hashOfConfig":"12"},{"size":246,"mtime":1610618999973,"results":"20","hashOfConfig":"12"},{"size":416,"mtime":1610778695773,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1lmqwxs",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"26"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"C:\\Users\\James\\Development\\offlinetv\\src\\index.tsx",[],"C:\\Users\\James\\Development\\offlinetv\\src\\reportWebVitals.ts",[],["46","47"],"C:\\Users\\James\\Development\\offlinetv\\src\\App.tsx",["48","49"],"C:\\Users\\James\\Development\\offlinetv\\src\\services\\memberService.tsx",[],"C:\\Users\\James\\Development\\offlinetv\\src\\components\\memberList.tsx",["50","51","52","53","54"],"import * as React from 'react';\r\nimport { pause, mySort } from '../utils';\r\nimport { getMembers } from '../services/memberService';\r\nimport { getStreamer, getStream } from '../services/twitchService';\r\nimport { Stream } from '../types/Stream';\r\nimport Loading from './loading';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nexport interface MemberListProps {\r\n}\r\n \r\nexport interface MemberListState {\r\n  loading: boolean,\r\n  members: Array<any>\r\n}\r\n\r\nclass MemberList extends React.Component<MemberListProps, MemberListState> {\r\n  state = {\r\n    loading: true,\r\n    members: []\r\n  };\r\n  \r\n  _isMounted = false;\r\n\r\n  componentWillUnmount() {\r\n    this._isMounted = false;\r\n  }\r\n\r\n  handleClick(url: string) {\r\n    window.open(url, \"_blank\");\r\n  }\r\n\r\n  // TODO: Refactor to be more abstract.\r\n  getAPI = async (members: any) => {\r\n    for (let i=0; i<members.length; i++) {\r\n      if (members[i].stream.label.toLowerCase() === \"twitch\") {\r\n        try {\r\n          // const streamerData = await getStreamer(members[i].stream.id);\r\n          // const streamData = await getStream(members[i].stream.id);\r\n          // console.log(streamerData);\r\n          // console.log(streamData);\r\n          // let stream: Stream = {};\r\n\r\n          // if (streamerData !== null) {\r\n          //   stream.logo = streamerData.logo;\r\n          // }\r\n\r\n          // if (streamData !== null) {\r\n          //   stream.viewers = streamData.viewers;\r\n          //   stream.game = streamData.game;\r\n          //   stream.lastStream = streamData.created_at;\r\n          //   stream.title = streamData.channel.status;\r\n          //   stream.followers = streamData.channel.followers;\r\n\r\n          //   members[i].stream.live = true;\r\n          // }\r\n\r\n          // members[i].api = { ...members[i].api,  ...stream };\r\n        } catch (error) {\r\n          console.error(\"error\", error);\r\n        }\r\n      } else {\r\n        console.log(\"Skipping non-Twitch streamers...\");\r\n      }\r\n    }\r\n\r\n    return members;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    console.log(\"Component starting to mount...\");\r\n\r\n    try {\r\n      this._isMounted = true;\r\n\r\n      // await pause(1.5);\r\n\r\n      // Get all members\r\n      let members = await getMembers();\r\n\r\n      // Use API here to merge data into members\r\n      // members = await this.getAPI(members);\r\n      // console.log(\"members\", members);\r\n\r\n      // Sort\r\n      // Get live members\r\n      let liveMembers = members.filter((member) => member.stream.live === true);\r\n      // Sort live members\r\n      mySort(liveMembers, \"api\", \"viewers\");\r\n      // Remove non-live members\r\n      members = members.filter((member) => member.stream.live === false);\r\n      // Sort non-live members by followers\r\n      mySort(members, \"api\", \"followers\");\r\n      // Merge live and non-live members\r\n      members = [ ...liveMembers, ...members ];\r\n\r\n      if (this._isMounted) {\r\n        console.log(\"Component mounted.\");\r\n        // this.setState({ members });\r\n        this.setState({ members, loading: false });\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n\r\n  populateList() {\r\n    const { members } = this.state;\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {members.map((member: any, index) => {\r\n          const { stream, api } = member;\r\n          const { live } = stream;\r\n          const { title, lastStream } = api;\r\n          let elapsed = \"\";\r\n\r\n          if (lastStream !== undefined) {\r\n            const start = moment(lastStream);\r\n            const now = moment();\r\n            const hours = now.diff(start, \"h\");\r\n            const minutes = now.diff(start, \"m\") % 60;\r\n            let decimalHours = Math.round((minutes / 60) * 10) / 10;\r\n            elapsed = `${hours + decimalHours} hrs`;\r\n\r\n            // console.log(hours);\r\n            // console.log(decimalHours);\r\n          }\r\n          \r\n          let channelClass = \"channel\";\r\n          if (live === true) {\r\n            channelClass += \" online\";\r\n          } else {\r\n            channelClass += \" offline\";\r\n          }\r\n\r\n          return (\r\n            <div \r\n              className={channelClass}\r\n              key={index}\r\n              onClick={() => this.handleClick(stream.url)}\r\n            >\r\n              <div className=\"avatar\">\r\n                {/* <div className=\"avatar-ring\"></div> */}\r\n                <img\r\n                  className={stream.label.toLowerCase()}\r\n                  src={api.logo || \"/avatars/\" + stream.avatar}\r\n                  alt={member.alias.charAt(0)}\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"details\">\r\n                <div className=\"ng\">\r\n                  <div className=\"name\">\r\n                    {member.alias}\r\n                  </div>\r\n                  <div className=\"game\">\r\n                    {live && api.game}\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"stream-title-p\">\r\n                  <div className=\"stream-title\" title={title}>\r\n                    {live && title}\r\n                  </div>\r\n                </div>\r\n        \r\n                <div className=\"view-count-p\">\r\n                  <div className=\"view-count\">\r\n                    {live && (api.viewers && api.viewers.toLocaleString())}\r\n                  </div>\r\n                  <div className=\"uptime\">\r\n                    {/* <i className=\"far fa-clock fa-xs\"></i> */}\r\n                    {lastStream && elapsed}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  render() { \r\n    const { loading } = this.state;\r\n\r\n    return (\r\n      <div className=\"content\">\r\n        <Loading loading={loading}>\r\n          {this.populateList()}\r\n        </Loading>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default MemberList;","C:\\Users\\James\\Development\\offlinetv\\src\\utils.ts",[],"C:\\Users\\James\\Development\\offlinetv\\src\\services\\twitchService.tsx",[],["55","56"],"C:\\Users\\James\\Development\\offlinetv\\src\\components\\loading.tsx",[],"C:\\Users\\James\\Development\\offlinetv\\src\\components\\refresh.tsx",[],["57","58"],"C:\\Users\\James\\Development\\offlinetv\\src\\components\\masthead.tsx",[],{"ruleId":"59","replacedBy":"60"},{"ruleId":"61","replacedBy":"62"},{"ruleId":"63","severity":1,"message":"64","line":3,"column":8,"nodeType":"65","messageId":"66","endLine":3,"endColumn":15},{"ruleId":"67","severity":1,"message":"68","line":28,"column":3,"nodeType":"65","endLine":28,"endColumn":12,"suggestions":"69"},{"ruleId":"63","severity":1,"message":"70","line":2,"column":10,"nodeType":"65","messageId":"66","endLine":2,"endColumn":15},{"ruleId":"63","severity":1,"message":"71","line":4,"column":10,"nodeType":"65","messageId":"66","endLine":4,"endColumn":21},{"ruleId":"63","severity":1,"message":"72","line":4,"column":23,"nodeType":"65","messageId":"66","endLine":4,"endColumn":32},{"ruleId":"63","severity":1,"message":"73","line":5,"column":10,"nodeType":"65","messageId":"66","endLine":5,"endColumn":16},{"ruleId":"63","severity":1,"message":"74","line":7,"column":8,"nodeType":"65","messageId":"66","endLine":7,"endColumn":9},{"ruleId":"59","replacedBy":"75"},{"ruleId":"61","replacedBy":"76"},{"ruleId":"59","replacedBy":"77"},{"ruleId":"61","replacedBy":"78"},"no-native-reassign",["79"],"no-negated-in-lhs",["80"],"@typescript-eslint/no-unused-vars","'Refresh' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect contains a call to 'setCount'. Without a list of dependencies, this can lead to an infinite chain of updates. To fix this, pass [count] as a second argument to the useEffect Hook.",["81"],"'pause' is defined but never used.","'getStreamer' is defined but never used.","'getStream' is defined but never used.","'Stream' is defined but never used.","'_' is defined but never used.",["79"],["80"],["79"],["80"],"no-global-assign","no-unsafe-negation",{"desc":"82","fix":"83"},"Add dependencies array: [count]",{"range":"84","text":"85"},[776,776],", [count]"]